{"version":3,"file":"machina.min.js","mappings":"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","sources":["webpack://machina/webpack/universalModuleDefinition","webpack://machina/./src/BehavioralFsm.js","webpack://machina/./src/Fsm.js","webpack://machina/./src/emitter.js","webpack://machina/./src/events.js","webpack://machina/./src/index.js","webpack://machina/./src/utils.js","webpack://machina/external umd {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack://machina/webpack/bootstrap","webpack://machina/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"machina\", [\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"machina\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"machina\"] = factory(root[\"_\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__4__) => {\nreturn ","var _ = require( \"lodash\" );\nvar utils = require( \"./utils\" );\nvar emitter = require( \"./emitter\" );\nvar topLevelEmitter = emitter.instance;\nvar events = require( \"./events\" );\n\nvar MACHINA_PROP = \"__machina__\";\n\nfunction BehavioralFsm( options ) {\n\t_.extend( this, options );\n\t_.defaults( this, utils.getDefaultBehavioralOptions() );\n\tthis.initialize.apply( this, arguments );\n\ttopLevelEmitter.emit( events.NEW_FSM, this );\n}\n\n_.extend( BehavioralFsm.prototype, {\n\tinitialize: function() {},\n\n\tinitClient: function initClient( client ) {\n\t\tvar initialState = this.initialState;\n\t\tif ( !initialState ) {\n\t\t\tthrow new Error( \"You must specify an initial state for this FSM\" );\n\t\t}\n\t\tif ( !this.states[ initialState ] ) {\n\t\t\tthrow new Error( \"The initial state specified does not exist in the states object.\" );\n\t\t}\n\t\tthis.transition( client, initialState );\n\t},\n\n\tconfigForState: function configForState( newState ) {\n\t\tvar newStateObj = this.states[ newState ];\n\t\tvar child;\n\t\t_.each( this.hierarchy, function( childListener, key ) {\n\t\t\tif ( childListener && typeof childListener.off === \"function\" ) {\n\t\t\t\tchildListener.off();\n\t\t\t}\n\t\t} );\n\n\t\tif ( newStateObj._child ) {\n\t\t\tnewStateObj._child = utils.getChildFsmInstance( newStateObj._child );\n\t\t\tchild = newStateObj._child && newStateObj._child.instance;\n\t\t\tthis.hierarchy[ child.namespace ] = utils.listenToChild( this, child );\n\t\t}\n\n\t\treturn child;\n\t},\n\n\tensureClientMeta: function ensureClientMeta( client ) {\n\t\tif ( typeof client !== \"object\" ) {\n\t\t\tthrow new Error( \"An FSM client must be an object.\" );\n\t\t}\n\t\tclient[ MACHINA_PROP ] = client[ MACHINA_PROP ] || {};\n\t\tif ( !client[ MACHINA_PROP ][ this.namespace ] ) {\n\t\t\tclient[ MACHINA_PROP ][ this.namespace ] = _.cloneDeep( utils.getDefaultClientMeta() );\n\t\t\tthis.initClient( client );\n\t\t}\n\t\treturn client[ MACHINA_PROP ][ this.namespace ];\n\t},\n\n\tbuildEventPayload: function( client, data ) {\n\t\tif ( _.isPlainObject( data ) ) {\n\t\t\treturn _.extend( data, { client: client, namespace: this.namespace } );\n\t\t} else {\n\t\t\treturn { client: client, data: data || null, namespace: this.namespace };\n\t\t}\n\t},\n\n\tgetHandlerArgs: function( args, isCatchAll ) {\n\t\t// index 0 is the client, index 1 is inputType\n\t\t// if we're in a catch-all handler, input type needs to be included in the args\n\t\t// inputType might be an object, so we need to just get the inputType string if so\n\t\tvar _args = args.slice( 0 );\n\t\tvar input = _args[ 1 ];\n\t\tif ( typeof input === \"object\" ) {\n\t\t\t_args.splice( 1, 1, input.inputType );\n\t\t}\n\t\treturn isCatchAll ?\n\t\t\t_args :\n\t\t\t[ _args[ 0 ] ].concat( _args.slice( 2 ) );\n\t},\n\n\tgetSystemHandlerArgs: function( args, client ) {\n\t\treturn [ client ].concat( args );\n\t},\n\n\thandle: function( client, input ) {\n\t\tvar inputDef = input;\n\t\tif ( typeof input === \"undefined\" ) {\n\t\t\tthrow new Error( \"The input argument passed to the FSM's handle method is undefined. Did you forget to pass the input name?\" );\n\t\t}\n\t\tif ( typeof input === \"string\" ) {\n\t\t\tinputDef = { inputType: input, delegated: false, ticket: undefined };\n\t\t}\n\t\tvar clientMeta = this.ensureClientMeta( client );\n\t\tvar args = utils.getLeaklessArgs( arguments );\n\t\tif ( typeof input !== \"object\" ) {\n\t\t\targs.splice( 1, 1, inputDef );\n\t\t}\n\t\tclientMeta.currentActionArgs = args.slice( 1 );\n\t\tvar currentState = clientMeta.state;\n\t\tvar stateObj = this.states[ currentState ];\n\t\tvar handlerName;\n\t\tvar handler;\n\t\tvar isCatchAll = false;\n\t\tvar child;\n\t\tvar result;\n\t\tvar action;\n\t\tif ( !clientMeta.inExitHandler ) {\n\t\t\tchild = this.configForState( currentState );\n\t\t\tif ( child && !this.pendingDelegations[ inputDef.ticket ] && !inputDef.bubbling ) {\n\t\t\t\tinputDef.ticket = ( inputDef.ticket || utils.createUUID() );\n\t\t\t\tinputDef.delegated = true;\n\t\t\t\tthis.pendingDelegations[ inputDef.ticket ] = { delegatedTo: child.namespace };\n\t\t\t\t// WARNING - returning a value from `handle` on child FSMs is not really supported.\n\t\t\t\t// If you need to return values from child FSM input handlers, use events instead.\n\t\t\t\tresult = child.handle.apply( child, args );\n\t\t\t} else {\n\t\t\t\tif ( inputDef.ticket && this.pendingDelegations[ inputDef.ticket ] ) {\n\t\t\t\t\tdelete this.pendingDelegations[ inputDef.ticket ];\n\t\t\t\t}\n\t\t\t\thandlerName = stateObj[ inputDef.inputType ] ? inputDef.inputType : \"*\";\n\t\t\t\tisCatchAll = ( handlerName === \"*\" );\n\t\t\t\thandler = ( stateObj[ handlerName ] || this[ handlerName ] ) || this[ \"*\" ];\n\t\t\t\taction = clientMeta.state + \".\" + handlerName;\n\t\t\t\tclientMeta.currentAction = action;\n\t\t\t\tvar eventPayload = this.buildEventPayload(\n\t\t\t\t\tclient,\n\t\t\t\t\t{ inputType: inputDef.inputType, delegated: inputDef.delegated, ticket: inputDef.ticket }\n\t\t\t\t);\n\t\t\t\tif ( !handler ) {\n\t\t\t\t\tthis.emit( events.NO_HANDLER, _.extend( { args: args }, eventPayload ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis.emit( events.HANDLING, eventPayload );\n\t\t\t\t\tif ( typeof handler === \"function\" ) {\n\t\t\t\t\t\tresult = handler.apply( this, this.getHandlerArgs( args, isCatchAll ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = handler;\n\t\t\t\t\t\tthis.transition( client, handler );\n\t\t\t\t\t}\n\t\t\t\t\tthis.emit( events.HANDLED, eventPayload );\n\t\t\t\t}\n\t\t\t\tclientMeta.priorAction = clientMeta.currentAction;\n\t\t\t\tclientMeta.currentAction = \"\";\n\t\t\t\tclientMeta.currentActionArgs = undefined;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\n\ttransition: function( client, newState ) {\n\t\tvar clientMeta = this.ensureClientMeta( client );\n\t\tvar curState = clientMeta.state;\n\t\tvar curStateObj = this.states[ curState ];\n\t\tvar newStateObj = this.states[ newState ];\n\t\tvar child;\n\t\tvar args = utils.getLeaklessArgs( arguments ).slice( 2 );\n\t\tif ( !clientMeta.inExitHandler && newState !== curState ) {\n\t\t\tif ( newStateObj ) {\n\t\t\t\tchild = this.configForState( newState );\n\t\t\t\tif ( curStateObj && curStateObj._onExit ) {\n\t\t\t\t\tclientMeta.inExitHandler = true;\n\t\t\t\t\tcurStateObj._onExit.call( this, client );\n\t\t\t\t\tclientMeta.inExitHandler = false;\n\t\t\t\t}\n\t\t\t\tclientMeta.targetReplayState = newState;\n\t\t\t\tclientMeta.priorState = curState;\n\t\t\t\tclientMeta.state = newState;\n\t\t\t\tvar eventPayload = this.buildEventPayload( client, {\n\t\t\t\t\tfromState: clientMeta.priorState,\n\t\t\t\t\taction: clientMeta.currentAction,\n\t\t\t\t\ttoState: newState\n\t\t\t\t} );\n\t\t\t\tthis.emit( events.TRANSITION, eventPayload );\n\t\t\t\tif ( newStateObj._onEnter ) {\n\t\t\t\t\tnewStateObj._onEnter.apply( this, this.getSystemHandlerArgs( args, client ) );\n\t\t\t\t}\n\t\t\t\tthis.emit( events.TRANSITIONED, eventPayload );\n\t\t\t\tif ( child ) {\n\t\t\t\t\tchild.handle( client, \"_reset\" );\n\t\t\t\t}\n\n\t\t\t\tif ( clientMeta.targetReplayState === newState ) {\n\t\t\t\t\tthis.processQueue( client, events.NEXT_TRANSITION );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.emit( events.INVALID_STATE, this.buildEventPayload( client, {\n\t\t\t\tstate: clientMeta.state,\n\t\t\t\tattemptedState: newState\n\t\t\t} ) );\n\t\t}\n\t},\n\n\tdeferUntilTransition: function( client, stateName ) {\n\t\tvar clientMeta = this.ensureClientMeta( client );\n\t\tvar stateList = _.isArray( stateName ) ? stateName : ( stateName ? [ stateName ] : undefined );\n\t\tif ( clientMeta.currentActionArgs ) {\n\t\t\tvar queued = {\n\t\t\t\ttype: events.NEXT_TRANSITION,\n\t\t\t\tuntilState: stateList,\n\t\t\t\targs: clientMeta.currentActionArgs\n\t\t\t};\n\t\t\tclientMeta.inputQueue.push( queued );\n\t\t\tvar eventPayload = this.buildEventPayload( client, {\n\t\t\t\tstate: clientMeta.state,\n\t\t\t\tqueuedArgs: queued\n\t\t\t} );\n\t\t\tthis.emit( events.DEFERRED, eventPayload );\n\t\t}\n\t},\n\n\tdeferAndTransition: function( client, stateName ) {\n\t\tthis.deferUntilTransition( client, stateName );\n\t\tthis.transition( client, stateName );\n\t},\n\n\tprocessQueue: function( client ) {\n\t\tvar clientMeta = this.ensureClientMeta( client );\n\t\tvar filterFn = function( item ) {\n\t\t\treturn ( ( !item.untilState ) || ( _.includes( item.untilState, clientMeta.state ) ) );\n\t\t};\n\t\tvar toProcess = _.filter( clientMeta.inputQueue, filterFn );\n\t\tclientMeta.inputQueue = _.difference( clientMeta.inputQueue, toProcess );\n\t\t_.each( toProcess, function( item ) {\n\t\t\tthis.handle.apply( this, [ client ].concat( item.args ) );\n\t\t}.bind( this ) );\n\t},\n\n\tclearQueue: function( client, name ) {\n\t\tvar clientMeta = this.ensureClientMeta( client );\n\t\tif ( !name ) {\n\t\t\tclientMeta.inputQueue = [];\n\t\t} else {\n\t\t\t// first pass we remove the target state from any `untilState` array\n\t\t\t_.each( clientMeta.inputQueue, function( item ) {\n\t\t\t\titem.untilState = _.without( item.untilState, name );\n\t\t\t} );\n\t\t\t// second pass we clear out deferred events with empty untilState arrays\n\t\t\tvar filter = function( evnt ) {\n\t\t\t\treturn evnt.untilState.length !== 0;\n\t\t\t};\n\t\t\tclientMeta.inputQueue = _.filter( clientMeta.inputQueue, filter );\n\t\t}\n\t},\n\n\tcompositeState: function( client ) {\n\t\tvar clientMeta = this.ensureClientMeta( client );\n\t\tvar state = clientMeta.state;\n\t\tvar child = this.states[state]._child && this.states[state]._child.instance;\n\t\tif ( child ) {\n\t\t\tstate += \".\" + child.compositeState( client );\n\t\t}\n\t\treturn state;\n\t}\n}, emitter.getInstance() );\n\nBehavioralFsm.extend = utils.extend;\n\nmodule.exports = BehavioralFsm;\n","var BehavioralFsm = require( \"./BehavioralFsm\" );\nvar utils = require( \"./utils\" );\nvar _ = require( \"lodash\" );\n\nvar Fsm = {\n\tconstructor: function() {\n\t\tBehavioralFsm.apply( this, arguments );\n\t\tthis.ensureClientMeta();\n\t},\n\tinitClient() {\n\t\tvar initialState = this.initialState;\n\t\tif ( !initialState ) {\n\t\t\tthrow new Error( \"You must specify an initial state for this FSM\" );\n\t\t}\n\t\tif ( !this.states[ initialState ] ) {\n\t\t\tthrow new Error( \"The initial state specified does not exist in the states object.\" );\n\t\t}\n\t\tthis.transition( initialState );\n\t},\n\tensureClientMeta() {\n\t\tif ( !this._stamped ) {\n\t\t\tthis._stamped = true;\n\t\t\t_.defaults( this, _.cloneDeep( utils.getDefaultClientMeta() ) );\n\t\t\tthis.initClient();\n\t\t}\n\t\treturn this;\n\t},\n\n\tensureClientArg: function( args ) {\n\t\tvar _args = args;\n\t\t// we need to test the args and verify that if a client arg has\n\t\t// been passed, it must be this FSM instance (this isn't a behavioral FSM)\n\t\tif ( typeof _args[ 0 ] === \"object\" && !( \"inputType\" in _args[ 0 ] ) && _args[ 0 ] !== this ) {\n\t\t\t_args.splice( 0, 1, this );\n\t\t} else if ( typeof _args[ 0 ] !== \"object\" || ( typeof _args[ 0 ] === \"object\" && ( \"inputType\" in _args[ 0 ] ) ) ) {\n\t\t\t_args.unshift( this );\n\t\t}\n\t\treturn _args;\n\t},\n\n\tgetHandlerArgs: function( args, isCatchAll ) {\n\t\t// index 0 is the client, index 1 is inputType\n\t\t// if we're in a catch-all handler, input type needs to be included in the args\n\t\t// inputType might be an object, so we need to just get the inputType string if so\n\t\tvar _args = args;\n\t\tvar input = _args[ 1 ];\n\t\tif ( typeof inputType === \"object\" ) {\n\t\t\t_args.splice( 1, 1, input.inputType );\n\t\t}\n\t\treturn isCatchAll ?\n\t\t\t_args.slice( 1 ) :\n\t\t\t_args.slice( 2 );\n\t},\n\n\tgetSystemHandlerArgs: function( args, client ) {\n\t\treturn args;\n\t},\n\n\t// \"classic\" machina FSM do not emit the client property on events (which would be the FSM itself)\n\tbuildEventPayload: function() {\n\t\tvar args = this.ensureClientArg( utils.getLeaklessArgs( arguments ) );\n\t\tvar data = args[ 1 ];\n\t\tif ( _.isPlainObject( data ) ) {\n\t\t\treturn _.extend( data, { namespace: this.namespace } );\n\t\t} else {\n\t\t\treturn { data: data || null, namespace: this.namespace };\n\t\t}\n\t}\n};\n\n_.each( [\n\t\"handle\",\n\t\"transition\",\n\t\"deferUntilTransition\",\n\t\"processQueue\",\n\t\"clearQueue\"\n], function( methodWithClientInjected ) {\n\tFsm[ methodWithClientInjected ] = function() {\n\t\tvar args = this.ensureClientArg( utils.getLeaklessArgs( arguments ) );\n\t\treturn BehavioralFsm.prototype[ methodWithClientInjected ].apply( this, args );\n\t};\n} );\n\nFsm = BehavioralFsm.extend( Fsm );\n\nmodule.exports = Fsm;\n","var utils = require( \"./utils\" );\nvar _ = require( \"lodash\" );\n\nfunction getInstance() {\n\treturn {\n\t\temit( eventName ) {\n\t\t\tvar args = utils.getLeaklessArgs( arguments );\n\t\t\tif ( this.eventListeners[ \"*\" ] ) {\n\t\t\t\t_.each( this.eventListeners[ \"*\" ], function( callback ) {\n\t\t\t\t\tif ( !this.useSafeEmit ) {\n\t\t\t\t\t\tcallback.apply( this, args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallback.apply( this, args );\n\t\t\t\t\t\t} catch ( exception ) {\n\t\t\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\t\t\tif ( console && typeof console.log !== \"undefined\" ) {\n\t\t\t\t\t\t\t\tconsole.log( exception.stack );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind( this ) );\n\t\t\t}\n\t\t\tif ( this.eventListeners[ eventName ] ) {\n\t\t\t\t_.each( this.eventListeners[ eventName ], function( callback ) {\n\t\t\t\t\tif ( !this.useSafeEmit ) {\n\t\t\t\t\t\tcallback.apply( this, args.slice( 1 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallback.apply( this, args.slice( 1 ) );\n\t\t\t\t\t\t} catch ( exception ) {\n\t\t\t\t\t\t\t/* istanbul ignore else  */\n\t\t\t\t\t\t\tif ( console && typeof console.log !== \"undefined\" ) {\n\t\t\t\t\t\t\t\tconsole.log( exception.stack );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind( this ) );\n\t\t\t}\n\t\t},\n\n\t\ton( eventName, callback ) {\n\t\t\tvar self = this;\n\t\t\tself.eventListeners = self.eventListeners || { \"*\": [] };\n\t\t\tif ( !self.eventListeners[ eventName ] ) {\n\t\t\t\tself.eventListeners[ eventName ] = [];\n\t\t\t}\n\t\t\tself.eventListeners[ eventName ].push( callback );\n\t\t\treturn {\n\t\t\t\teventName: eventName,\n\t\t\t\tcallback: callback,\n\t\t\t\toff: function() {\n\t\t\t\t\tself.off( eventName, callback );\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\toff( eventName, callback ) {\n\t\t\tthis.eventListeners = this.eventListeners || { \"*\": [] };\n\t\t\tif ( !eventName ) {\n\t\t\t\tthis.eventListeners = {};\n\t\t\t} else {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tthis.eventListeners[ eventName ] = _.without( this.eventListeners[ eventName ], callback );\n\t\t\t\t} else {\n\t\t\t\t\tthis.eventListeners[ eventName ] = [];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nmodule.exports = {\n\tgetInstance: getInstance,\n\tinstance: getInstance()\n};\n","module.exports = {\n\tNEXT_TRANSITION: \"transition\",\n\tHANDLING: \"handling\",\n\tHANDLED: \"handled\",\n\tNO_HANDLER: \"nohandler\",\n\tTRANSITION: \"transition\",\n\tTRANSITIONED: \"transitioned\",\n\tINVALID_STATE: \"invalidstate\",\n\tDEFERRED: \"deferred\",\n\tNEW_FSM: \"newfsm\"\n};\n","var _ = require( \"lodash\" );\nvar emitter = require( \"./emitter\" );\n\nmodule.exports = _.merge( emitter.instance, {\n\tFsm: require( \"./Fsm\" ),\n\tBehavioralFsm: require( \"./BehavioralFsm\" ),\n\tutils: require( \"./utils\" ),\n\teventListeners: {\n\t\tnewFsm: []\n\t}\n} );\n","var slice = [].slice;\nvar events = require( \"./events.js\" );\nvar _ = require( \"lodash\" );\n\nvar makeFsmNamespace = ( function() {\n\tvar machinaCount = 0;\n\treturn function() {\n\t\treturn \"fsm.\" + machinaCount++;\n\t};\n} )();\n\nfunction getDefaultBehavioralOptions() {\n\treturn {\n\t\tinitialState: \"uninitialized\",\n\t\teventListeners: {\n\t\t\t\"*\": []\n\t\t},\n\t\tstates: {},\n\t\tnamespace: makeFsmNamespace(),\n\t\tuseSafeEmit: false,\n\t\thierarchy: {},\n\t\tpendingDelegations: {}\n\t};\n}\n\nfunction getDefaultClientMeta() {\n\treturn {\n\t\tinputQueue: [],\n\t\ttargetReplayState: \"\",\n\t\tstate: undefined,\n\t\tpriorState: undefined,\n\t\tpriorAction: \"\",\n\t\tcurrentAction: \"\",\n\t\tcurrentActionArgs: undefined,\n\t\tinExitHandler: false\n\t};\n}\n\nfunction getLeaklessArgs( args, startIdx ) {\n\tvar result = [];\n\tfor ( var i = ( startIdx || 0 ); i < args.length; i++ ) {\n\t\tresult[ i ] = args[ i ];\n\t}\n\treturn result;\n}\n/*\n\thandle ->\n\t\tchild = stateObj._child && stateObj._child.instance;\n\n\ttransition ->\n\t\tnewStateObj._child = getChildFsmInstance( newStateObj._child );\n\t\tchild = newStateObj._child && newStateObj._child.instance;\n*/\nfunction getChildFsmInstance( config ) {\n\tif ( !config ) {\n\t\treturn;\n\t}\n\tvar childFsmDefinition = {};\n\tif ( typeof config === \"object\" ) {\n\t\t// is this a config object with a factory?\n\t\tif ( config.factory ) {\n\t\t\tchildFsmDefinition = config;\n\t\t\tchildFsmDefinition.instance = childFsmDefinition.factory();\n\t\t} else {\n\t\t\t// assuming this is a machina instance\n\t\t\tchildFsmDefinition.factory = function() {\n\t\t\t\treturn config;\n\t\t\t};\n\t\t}\n\t} else if ( typeof config === \"function\" ) {\n\t\tchildFsmDefinition.factory = config;\n\t}\n\tchildFsmDefinition.instance = childFsmDefinition.factory();\n\treturn childFsmDefinition;\n}\n\nfunction listenToChild( fsm, child ) {\n\t// Need to investigate potential for discarded event\n\t// listener memory leak in long-running, deeply-nested hierarchies.\n\treturn child.on( \"*\", function( eventName, data ) {\n\t\tswitch ( eventName ) {\n\t\t\tcase events.NO_HANDLER:\n\t\t\t\tif ( !data.ticket && !data.delegated && data.namespace !== fsm.namespace ) {\n\t\t\t\t\t// Ok - we're dealing w/ a child handling input that should bubble up\n\t\t\t\t\tdata.args[ 1 ].bubbling = true;\n\t\t\t\t}\n\t\t\t\t// we do NOT bubble _reset inputs up to the parent\n\t\t\t\tif ( data.inputType !== \"_reset\" ) {\n\t\t\t\t\tfsm.handle.apply( fsm, data.args );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase events.HANDLING :\n\t\t\t\tvar ticket = data.ticket;\n\t\t\t\tif ( ticket && fsm.pendingDelegations[ ticket ] ) {\n\t\t\t\t\tdelete fsm.pendingDelegations[ ticket ];\n\t\t\t\t}\n\t\t\t\tfsm.emit( eventName, data ); // possibly transform payload?\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfsm.emit( eventName, data ); // possibly transform payload?\n\t\t\t\tbreak;\n\t\t}\n\t} );\n}\n\n// _machKeys are members we want to track across the prototype chain of an extended FSM constructor\n// Since we want to eventually merge the aggregate of those values onto the instance so that FSMs\n// that share the same extended prototype won't share state *on* those prototypes.\nvar _machKeys = [ \"states\", \"initialState\" ];\nvar extend = function( protoProps, staticProps ) {\n\tvar parent = this;\n\tvar fsm; // placeholder for instance constructor\n\tvar machObj = {}; // object used to hold initialState & states from prototype for instance-level merging\n\tvar Ctor = function() {}; // placeholder ctor function used to insert level in prototype chain\n\n\t// The constructor function for the new subclass is either defined by you\n\t// (the \"constructor\" property in your `extend` definition), or defaulted\n\t// by us to simply call the parent's constructor.\n\tif ( protoProps && protoProps.hasOwnProperty( \"constructor\" ) ) {\n\t\tfsm = protoProps.constructor;\n\t} else {\n\t\t// The default machina constructor (when using inheritance) creates a\n\t\t// deep copy of the states/initialState values from the prototype and\n\t\t// extends them over the instance so that they'll be instance-level.\n\t\t// If an options arg (args[0]) is passed in, a states or intialState\n\t\t// value will be preferred over any data pulled up from the prototype.\n\t\tfsm = function() {\n\t\t\tvar args = slice.call( arguments, 0 );\n\t\t\targs[ 0 ] = args[ 0 ] || {};\n\t\t\tvar blendedState;\n\t\t\tvar instanceStates = args[ 0 ].states || {};\n\t\t\tblendedState = _.merge( _.cloneDeep( machObj ), { states: instanceStates } );\n\t\t\tblendedState.initialState = args[ 0 ].initialState || this.initialState;\n\t\t\t_.extend( args[ 0 ], blendedState );\n\t\t\tparent.apply( this, args );\n\t\t};\n\t}\n\n\t// Inherit class (static) properties from parent.\n\t_.merge( fsm, parent );\n\n\t// Set the prototype chain to inherit from `parent`, without calling\n\t// `parent`'s constructor function.\n\tCtor.prototype = parent.prototype;\n\tfsm.prototype = new Ctor();\n\n\t// Add prototype properties (instance properties) to the subclass,\n\t// if supplied.\n\tif ( protoProps ) {\n\t\t_.extend( fsm.prototype, protoProps );\n\t\t_.merge( machObj, _.transform( protoProps, function( accum, val, key ) {\n\t\t\tif ( _machKeys.indexOf( key ) !== -1 ) {\n\t\t\t\taccum[ key ] = val;\n\t\t\t}\n\t\t} ) );\n\t}\n\n\t// Add static properties to the constructor function, if supplied.\n\tif ( staticProps ) {\n\t\t_.merge( fsm, staticProps );\n\t}\n\n\t// Correctly set child's `prototype.constructor`.\n\tfsm.prototype.constructor = fsm;\n\n\t// Set a convenience property in case the parent's prototype is needed later.\n\tfsm.__super__ = parent.prototype;\n\treturn fsm;\n};\n\nfunction createUUID() {\n\tvar s = [];\n\tvar hexDigits = \"0123456789abcdef\";\n\tfor ( var i = 0; i < 36; i++ ) {\n\t\ts[ i ] = hexDigits.substr( Math.floor( Math.random() * 0x10 ), 1 );\n\t}\n\ts[ 14 ] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n\t/* jshint ignore:start */\n\ts[ 19 ] = hexDigits.substr( ( s[ 19 ] & 0x3 ) | 0x8, 1 ); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n\t/* jshint ignore:end */\n\ts[ 8 ] = s[ 13 ] = s[ 18 ] = s[ 23 ] = \"-\";\n\treturn s.join( \"\" );\n}\n\nmodule.exports = {\n\tcreateUUID: createUUID,\n\textend: extend,\n\tgetDefaultBehavioralOptions: getDefaultBehavioralOptions,\n\tgetDefaultOptions: getDefaultBehavioralOptions,\n\tgetDefaultClientMeta: getDefaultClientMeta,\n\tgetChildFsmInstance: getChildFsmInstance,\n\tgetLeaklessArgs: getLeaklessArgs,\n\tlistenToChild: listenToChild,\n\tmakeFsmNamespace: makeFsmNamespace\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(579);\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__4__","_","utils","emitter","topLevelEmitter","instance","events","MACHINA_PROP","BehavioralFsm","options","extend","defaults","getDefaultBehavioralOptions","initialize","apply","arguments","emit","NEW_FSM","prototype","initClient","client","initialState","Error","states","transition","configForState","newState","child","newStateObj","each","hierarchy","childListener","key","off","_child","getChildFsmInstance","namespace","listenToChild","ensureClientMeta","cloneDeep","getDefaultClientMeta","buildEventPayload","data","isPlainObject","getHandlerArgs","args","isCatchAll","_args","slice","input","splice","inputType","concat","getSystemHandlerArgs","handle","inputDef","delegated","ticket","undefined","clientMeta","getLeaklessArgs","currentActionArgs","handlerName","handler","result","action","currentState","state","stateObj","inExitHandler","pendingDelegations","bubbling","currentAction","eventPayload","HANDLING","HANDLED","NO_HANDLER","priorAction","createUUID","delegatedTo","curState","curStateObj","_onExit","call","targetReplayState","priorState","fromState","toState","TRANSITION","_onEnter","TRANSITIONED","processQueue","NEXT_TRANSITION","INVALID_STATE","attemptedState","deferUntilTransition","stateName","stateList","isArray","queued","type","untilState","inputQueue","push","queuedArgs","DEFERRED","deferAndTransition","toProcess","filter","item","includes","difference","bind","clearQueue","name","without","evnt","length","compositeState","getInstance","Fsm","constructor","_stamped","ensureClientArg","unshift","methodWithClientInjected","eventName","eventListeners","callback","useSafeEmit","exception","console","log","stack","on","self","merge","newFsm","machinaCount","makeFsmNamespace","_machKeys","s","hexDigits","i","substr","Math","floor","random","join","protoProps","staticProps","fsm","parent","machObj","Ctor","hasOwnProperty","blendedState","instanceStates","transform","accum","val","indexOf","__super__","getDefaultOptions","config","childFsmDefinition","startIdx","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}